---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "perimeter81_ipsec_redundant Resource - terraform-provider-perimeter81"
subcategory: ""
description: |-
  
---

# perimeter81_ipsec_redundant (Resource)

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `advanced_settings` (Block List, Min: 1) (see [below for nested schema](#nestedblock--advanced_settings))
- `network_id` (String) the network id that has this tunnel.
- `region_id` (String) the region id in this network that we want to create this tunnel in
- `shared_settings` (Block List, Min: 1) (see [below for nested schema](#nestedblock--shared_settings))
- `tunnel1` (Block List, Min: 1) (see [below for nested schema](#nestedblock--tunnel1))
- `tunnel2` (Block List, Min: 1) (see [below for nested schema](#nestedblock--tunnel2))
- `tunnel_name` (String) The name of the tunnel (Should be longer than 3 characters)

### Read-Only

- `id` (String) The ID of this resource.

### Example

```terraform
 resource "perimeter81_network" "n1" {
   network {
     name = "network-test"
     tags = ["test"]
   }
   region {
     cpregion_id = "v2cRwzGRua"
     instance_count = 2
     idle = true
   }
 }

data "perimeter81_networks" "all" {
    depends_on = [
        perimeter81_network.n1
    ]
}

resource "perimeter81_ipsec_redundant" "ipsr1" {
  region_id = perimeter81_network.n1.region[0].region_id
  network_id = perimeter81_network.n1.id
  tunnel_name = "ipseed"
  tunnel1 {
      passphrase = "aXvgHEYt"
      p81_gwinternal_ip = "169.254.100.19"
      remote_gwinternal_ip = "169.254.100.5"
      remote_public_ip = "169.254.100.7"
      remote_id = "169.254.100.7"
      remote_asn = 65323
      gateway_id = {
        for network in data.perimeter81_networks.all.networks :
        network.id => network.regions[0].instances[0].id
        if network.id == perimeter81_network.n1.id
      }[perimeter81_network.n1.id]
  }
  tunnel2 {
      passphrase = "Sg4gKHtT"
      p81_gwinternal_ip = "169.254.100.10"
      remote_gwinternal_ip = "169.254.100.14"
      remote_public_ip = "169.254.100.16"
      remote_id = "169.254.100.16"
      remote_asn = 65324
      gateway_id = {
        for network in data.perimeter81_networks.all.networks :
        network.id => network.regions[0].instances[1].id
        if network.id == perimeter81_network.n1.id
      }[perimeter81_network.n1.id]
  }
  shared_settings {
    p81_gateway_subnets = ["0.0.0.0/0"]
    remote_gateway_subnets = ["0.0.0.0/0"]
  }
  advanced_settings {
    key_exchange = "ikev2"
    ike_life_time = "8h"
    lifetime = "1h"
    dpd_delay = "10s"
    dpd_timeout = "30s"
    phase1 {
      auth = ["3des"]
      encryption = ["sha256"]
      dh = [14]
    }
    phase2 {
      auth = ["3des"]
      encryption = ["sha256"]
      dh = [14]
    }
  }
}
```

<a id="nestedblock--advanced_settings"></a>
### Nested Schema for `advanced_settings`

Required:

- `dpd_delay` (String) The delay time that the tunnel should wait to receive a response to the DPD message (Possible ranges: 5s - 60s)
- `dpd_timeout` (String) The maximum time that the tunnel should wait to receive a response to the DPD message before considering the peer to be dead (Possible ranges: 5s - 60s)
- `ike_life_time` (String) Possible ranges: 10s - 86400s, 1m - 1440m, 1h - 24h
- `key_exchange` (String) Possible values: ikev1 or ikev2
- `lifetime` (String) Possible ranges: 10s - 86400s, 1m - 1440m, 1h - 24h
- `phase1` (Block List, Min: 1) (see [below for nested schema](#nestedblock--advanced_settings--phase1))
- `phase2` (Block List, Min: 1) (see [below for nested schema](#nestedblock--advanced_settings--phase2))

<a id="nestedblock--advanced_settings--phase1"></a>
### Nested Schema for `advanced_settings.phase1`

Required:

- `auth` (List of String) Possible values: md5, sha1, sha256, sha348, sha512
- `dh` (List of Number) Possible values: 2, 5, 14, 19, 20, 21
- `encryption` (List of String) Possible values: 3des, blowfish128, blowfish192, blowfish256, aes128, aes192, aes256

<a id="nestedblock--advanced_settings--phase2"></a>
### Nested Schema for `advanced_settings.phase2`

Required:

- `auth` (List of String) Possible values: md5, sha1, sha256, sha348, sha512
- `dh` (List of Number) Possible values: 2, 5, 14, 19, 20, 21
- `encryption` (List of String) Possible values: 3des, blowfish128, blowfish192, blowfish256, aes128, aes192, aes256

<a id="nestedblock--shared_settings"></a>
### Nested Schema for `shared_settings`

Required:

- `p81_gateway_subnets` (List of String) Specify your Perimeter 81 network subnet
- `remote_gateway_subnets` (List of String) Specify your on-premises internal network subnet.

<a id="nestedblock--tunnel1"></a>
### Nested Schema for `tunnel1`

Required:

- `gateway_id` (String) The gateway ID that we want to add this tunnel to
- `p81_gwinternal_ip` (String) This is the internal IP of the P81 end of the tunnel. The internal IP is required for the BGP protocol
- `passphrase` (String, Sensitive) A pre-shared key is a string of characters (like a password) that will be used by both of the tunnel parties. It can contain only alphanumeric characters 0 - 64 and can not start with 0.
- `remote_asn` (Number) The Autonomous System Number (ASN) is required for the Border Gateway Protocol(BGP)
- `remote_gwinternal_ip` (String) This is the internal IP of the second end of the tunnel. The internal IP is required for the BGP protocol
- `remote_public_ip` (String) This is the public IP address of the second end of the tunnel

Optional:

- `remote_id` (String) In most cases, the ID of the remote tunnel is the public IP of the tunnel. However, it must be configured to the same value on both ends

<a id="nestedblock--tunnel2"></a>
### Nested Schema for `tunnel2`

Required:

- `gateway_id` (String) The gateway ID that we want to add this tunnel to
- `p81_gwinternal_ip` (String) This is the internal IP of the P81 end of the tunnel. The internal IP is required for the BGP protocol
- `passphrase` (String, Sensitive) A pre-shared key is a string of characters (like a password) that will be used by both of the tunnel parties. It can contain only alphanumeric characters 0 - 64 and can not start with 0.
- `remote_asn` (Number) The Autonomous System Number (ASN) is required for the Border Gateway Protocol(BGP)
- `remote_gwinternal_ip` (String) This is the internal IP of the second end of the tunnel. The internal IP is required for the BGP protocol
- `remote_public_ip` (String) This is the public IP address of the second end of the tunnel

Optional:

- `remote_id` (String) In most cases, the ID of the remote tunnel is the public IP of the tunnel. However, it must be configured to the same value on both ends

## import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Ip-Sec redundant tunnel using Network ID (networkId) and haTunnelID ID (common tunnel id for both tunnels in the redundant tunnel) (tunnelId). For example:

```terraform
import {
  to = perimeter81_ipsec_redundant.ipsr1
  id = "j1rrk5k0q-c1hgl6d1m"
}
```

Using `terraform import`, import Ip-Sec redundant tunnel using Network ID (networkId) and haTunnelID ID (common tunnel id for both tunnels in the redundant tunnel) (tunnelId) in format of networkId-tunnelId. For example:

```terraform
% terraform import perimeter81_ipsec_redundant.ipsr1 j1rrk5k0q-c1hgl6d1m
```
